<!DOCTYPE html>
<html lang="en">
<head>
    <title>AR Model Test Without GPS</title>
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        .controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .scale-controls {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 5px;
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
    <a-scene embedded vr-mode-ui="enabled: false; renderer=autoResize: false; autoViewport: false; logarithmicDepthBuffer: true; antialias: true;">

        <!-- Static camera with fixed aspect ratio -->
        <a-camera 
            position="0 1.6 3" 
            fov="60" 
            near="0.1" 
            far="10000" 
            camera="active: true; aspectRatio: 1.6" <!-- Manually set the aspect ratio -->
        ></a-camera>

        <!-- Static GLTF model placed without GPS -->
        <a-entity
            id="model"
            gltf-model="https://zunuk.github.io/testni/Finito1.glb"
            position="0 0 -3"  <!-- Set this position to ensure the model is in view -->
            scale="1 1 1"  <!-- Initial scale -->
            rotation="0 0 0"
            visible="true"
        ></a-entity>

        <!-- Lighting Setup -->
        <a-light type="ambient" color="#FFF" intensity="1.5"></a-light>
        <a-light type="hemisphere" color="#FFFFBB" groundColor="#080820" intensity="1.2" position="0 20 0"></a-light>
        <a-light type="directional" color="#FFF" intensity="1.8" position="-2 4 -1" castShadow="true"></a-light>
        <a-light type="point" color="#FFF" intensity="1.5" position="2 3 2"></a-light>
    </a-scene>

    <!-- Control Buttons for Scale and Rotation -->
    <div class="controls">
        <h3>Rotate Model</h3>
        <div>
            <button onclick="changeRotation(5)">Rotate +</button>
            <button onclick="changeRotation(-5)">Rotate -</button>
        </div>
    </div>

    <div class="scale-controls">
        <button onclick="changeScale(10)">Scale +</button> <!-- Increase by 10 units -->
        <button onclick="changeScale(-1)">Scale -</button> <!-- Decrease by 1 unit -->
    </div>

<script>
    let scale = 1;
    let rotation = 0;
    let modelEntity;

    // Scale adjustment using object3D.scale.set()
    function changeScale(step) {
        scale = Math.max(0.1, scale + step);  // Prevent scale from going below 0.1
        if (modelEntity) {
            // Use object3D.scale.set to apply scaling directly
            modelEntity.object3D.scale.set(scale, scale, scale);
            console.log('Scale set to:', scale);
        }
    }

    // Rotation adjustment
    function changeRotation(step) {
        rotation += step;
        if (modelEntity) {
            modelEntity.object3D.rotation.y += (step * Math.PI) / 180;  // Rotate in radians
            console.log('Rotation set to:', rotation);
        }
    }

    window.onload = function () {
        modelEntity = document.querySelector('#model');
        if (modelEntity) {
            // Ensure the model has loaded
            modelEntity.addEventListener('model-loaded', () => {
                console.log('Model loaded successfully');
                // Apply initial scale and rotation after the model is loaded
                modelEntity.object3D.scale.set(scale, scale, scale);
                modelEntity.object3D.rotation.y = rotation;
            });
        }
    };
</script>

</body>
</html>
